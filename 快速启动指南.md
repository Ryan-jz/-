# 国际化功能快速启动指南

## 🚀 5分钟快速部署

### 第一步：数据库迁移（2分钟）

打开 MySQL 客户端，执行以下命令：

```bash
# 方式1：命令行
mysql -u root -p your_database < backend/manifest/sql/i18n_migration.sql
mysql -u root -p your_database < backend/manifest/sql/banner_i18n_migration.sql

# 方式2：MySQL Workbench
# 打开两个 SQL 文件，依次执行
```

**验证**：
```sql
-- 检查表是否创建成功
SHOW TABLES LIKE '%_i18n';

-- 应该看到：
-- banner_i18n
-- product_category_i18n
-- product_i18n
-- recipe_i18n
```

### 第二步：编译后端（1分钟）

```bash
cd backend
build.bat
```

等待编译完成，看到 "编译成功" 提示。

### 第三步：重启服务（1分钟）

1. 停止当前运行的 `gf-admin.exe`（如果有）
2. 双击运行 `backend/gf-admin.exe`
3. 看到服务启动成功的日志

### 第四步：测试功能（1分钟）

#### 测试后台管理

1. 打开浏览器访问后台管理系统
2. 进入"轮播图管理"
3. 点击"新增轮播图"
4. 应该能看到"多语言内容"部分，有三个标签页：
   - 中文 (zh-CN)
   - English (en-US)
   - Deutsch (de-DE)

#### 测试前端网站

1. 打开前端网站
2. 查看导航栏右侧
3. 应该能看到语言切换按钮（显示国旗和语言名称）
4. 点击按钮，选择不同语言
5. 页面刷新并切换到新语言

---

## ✅ 功能验证清单

### 后台管理系统

#### Banner 管理
- [ ] 能看到"多语言内容"部分
- [ ] 能切换三个语言标签页
- [ ] 能填写不同语言的内容
- [ ] 保存后能正确加载数据
- [ ] 编辑时能看到之前填写的内容

#### 产品分类管理
- [ ] 能看到"多语言内容"部分
- [ ] 能填写分类名称和描述
- [ ] 保存和编辑功能正常

#### 产品管理
- [ ] 后端 API 支持国际化
- [ ] 能获取国际化数据

#### 食谱管理
- [ ] 后端 API 支持国际化
- [ ] 能获取国际化数据

### 前端网站

- [ ] 导航栏右侧显示语言切换按钮
- [ ] 点击按钮显示下拉菜单
- [ ] 下拉菜单显示三种语言选项
- [ ] 当前语言高亮显示
- [ ] 切换语言后页面刷新
- [ ] 刷新页面后语言保持不变
- [ ] 移动端显示正常

---

## 🎯 快速使用示例

### 示例1：创建多语言 Banner

1. 进入"轮播图管理"
2. 点击"新增轮播图"
3. 填写多语言内容：

**中文标签页**：
- 标题：欢迎来到我们的网站
- 描述：探索优质的阿尔卑斯盐产品
- 按钮文字：了解更多

**English 标签页**：
- Title: Welcome to Our Website
- Description: Explore Premium Alpine Salt Products
- Button Text: Learn More

**Deutsch 标签页**：
- Titel: Willkommen auf unserer Website
- Beschreibung: Entdecken Sie Premium-Alpensalzprodukte
- Button-Text: Mehr erfahren

4. 上传图片或视频
5. 选择位置和状态
6. 点击"确定"保存

### 示例2：创建多语言产品分类

1. 进入"产品分类管理"
2. 点击"新增分类"
3. 填写多语言内容：

**中文**：
- 分类名称：调味盐系列
- 分类描述：BBQ调味盐、香草调味盐等特色调味盐产品

**English**：
- Category Name: Seasoning Salt Series
- Description: BBQ seasoning salt, herb seasoning salt and other specialty products

**Deutsch**：
- Kategoriename: Gewürzsalz-Serie
- Beschreibung: BBQ-Gewürzsalz, Kräutergewürzsalz und andere Spezialprodukte

4. 填写分类标识：`seasoning-salt`
5. 点击"确定"保存

### 示例3：前端切换语言

1. 打开前端网站
2. 点击导航栏右侧的语言按钮（默认显示 🇨🇳 中文）
3. 在下拉菜单中选择 🇺🇸 English
4. 页面自动刷新，所有内容切换为英文
5. 再次访问网站，语言保持为英文

---

## 🔧 常见问题快速解决

### 问题1：看不到"多语言内容"部分

**原因**：前端代码未更新或浏览器缓存

**解决**：
```bash
# 清除浏览器缓存
Ctrl + Shift + Delete

# 或强制刷新
Ctrl + F5
```

### 问题2：保存时提示"国际化内容不能为空"

**原因**：未填写必填字段

**解决**：
- 至少填写中文版本的标题/名称
- 检查是否所有必填字段都已填写

### 问题3：编辑时看不到之前的内容

**原因**：数据库中没有国际化数据

**解决**：
```sql
-- 检查数据
SELECT * FROM banner_i18n WHERE banner_id = 1;

-- 如果没有数据，重新执行迁移脚本
source backend/manifest/sql/banner_i18n_migration.sql;
```

### 问题4：前端语言切换按钮不显示

**原因**：组件未正确导入

**解决**：
- 检查 `PrimaryNavigation.vue` 是否导入了 `LanguageSwitcher`
- 检查浏览器控制台是否有错误
- 确认 `LanguageSwitcher.vue` 文件存在

### 问题5：切换语言后内容没变化

**原因**：API 未传递 locale 参数

**解决**：
```javascript
// 在 API 请求中添加 locale 参数
import { getLocale } from '@/locales'

const locale = getLocale()
const res = await fetch(`/api/v1/banner/list?locale=${locale}`)
```

---

## 📞 获取帮助

### 查看文档
- `BANNER_I18N_GUIDE.md` - Banner 详细指南
- `产品食谱国际化部署指南.md` - 产品和食谱指南
- `前端网站语言切换功能说明.md` - 前端语言切换
- `国际化功能完整总结.md` - 完整功能总结

### 检查日志
- 后端日志：查看 `gf-admin.exe` 控制台输出
- 前端日志：打开浏览器开发者工具（F12）查看 Console

### 数据库检查
```sql
-- 检查表结构
DESC banner_i18n;
DESC product_category_i18n;
DESC product_i18n;
DESC recipe_i18n;

-- 检查数据
SELECT COUNT(*) FROM banner_i18n;
SELECT * FROM banner_i18n LIMIT 5;
```

---

## 🎉 成功标志

当你看到以下情况，说明部署成功：

1. ✅ 后台管理能看到"多语言内容"标签页
2. ✅ 能填写和保存三种语言的内容
3. ✅ 编辑时能正确加载之前的内容
4. ✅ 前端网站右上角显示语言切换按钮
5. ✅ 能切换语言并看到内容变化
6. ✅ 刷新页面后语言保持不变

---

## 🚀 下一步

部署成功后，你可以：

1. **填充内容**
   - 为现有的 Banner、产品、食谱添加多语言翻译
   - 创建新的多语言内容

2. **测试体验**
   - 在不同语言下浏览网站
   - 检查翻译质量和准确性

3. **优化改进**
   - 根据用户反馈调整翻译
   - 添加更多语言支持
   - 优化用户体验

---

**祝你部署顺利！🎊**

如有问题，请查看详细文档或检查日志。
