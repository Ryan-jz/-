import{g as N,b as R,e as I,f as S}from"./product-D73ubbXh.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as m,b as J}from"./element-plus-BcUKyH_i.js";import{r as f,l as A,j as F,B as G,C as l,D as t,ak as n,aq as H,z as w,J as K,y as P,M as d,O as Q,E as C}from"./vue-vendor-BRUv3CCy.js";import"./index-D6S6O2v3.js";const W={class:"category-container"},X={class:"card-header"},Y={__name:"category",setup(Z){const _=f(!1),v=f([]),u=f(!1),g=f("新增分类"),b=f(null),o=A({id:null,name:"",nameEn:"",slug:"",description:"",sortOrder:0,status:1}),k={name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],slug:[{required:!0,message:"请输入分类标识",trigger:"blur"}]},y=async()=>{_.value=!0;try{const r=await N();v.value=r.data.list||[]}catch{m.error("获取分类列表失败")}finally{_.value=!1}},x=()=>{g.value="新增分类",Object.assign(o,{id:null,name:"",nameEn:"",slug:"",description:"",sortOrder:0,status:1}),u.value=!0},E=r=>{g.value="编辑分类",Object.assign(o,r),u.value=!0},O=async()=>{b.value&&await b.value.validate(async r=>{if(r)try{o.id?(await I(o),m.success("更新成功")):(await S(o),m.success("创建成功")),u.value=!1,y()}catch(e){m.error(e.message||"操作失败")}})},B=r=>{J.confirm(`确定要删除分类"${r.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await R(r.id),m.success("删除成功"),y()}catch(e){m.error(e.message||"删除失败")}})};return F(()=>{y()}),(r,e)=>{const p=n("el-button"),s=n("el-table-column"),D=n("el-tag"),U=n("el-table"),M=n("el-card"),c=n("el-input"),i=n("el-form-item"),T=n("el-input-number"),V=n("el-radio"),$=n("el-radio-group"),j=n("el-form"),q=n("el-dialog"),z=H("loading");return w(),G("div",W,[l(M,{shadow:"never"},{header:t(()=>[C("div",X,[e[9]||(e[9]=C("span",null,"产品分类管理",-1)),l(p,{type:"primary",onClick:x},{default:t(()=>[...e[8]||(e[8]=[d("新增分类",-1)])]),_:1})])]),default:t(()=>[K((w(),P(U,{data:v.value,border:"",style:{width:"100%"}},{default:t(()=>[l(s,{prop:"id",label:"ID",width:"80"}),l(s,{prop:"name",label:"分类名称","min-width":"150"}),l(s,{prop:"nameEn",label:"英文名称","min-width":"150"}),l(s,{prop:"slug",label:"标识",width:"150"}),l(s,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),l(s,{label:"状态",width:"100"},{default:t(({row:a})=>[l(D,{type:a.status===1?"success":"danger"},{default:t(()=>[d(Q(a.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(s,{prop:"sortOrder",label:"排序",width:"80"}),l(s,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[l(p,{type:"primary",size:"small",onClick:L=>E(a)},{default:t(()=>[...e[10]||(e[10]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(p,{type:"danger",size:"small",onClick:L=>B(a)},{default:t(()=>[...e[11]||(e[11]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,_.value]])]),_:1}),l(q,{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value=a),title:g.value,width:"600px","close-on-click-modal":!1},{footer:t(()=>[l(p,{onClick:e[6]||(e[6]=a=>u.value=!1)},{default:t(()=>[...e[14]||(e[14]=[d("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:O},{default:t(()=>[...e[15]||(e[15]=[d("确定",-1)])]),_:1})]),default:t(()=>[l(j,{ref_key:"formRef",ref:b,model:o,rules:k,"label-width":"120px"},{default:t(()=>[l(i,{label:"分类名称",prop:"name"},{default:t(()=>[l(c,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.name=a),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),l(i,{label:"英文名称",prop:"nameEn"},{default:t(()=>[l(c,{modelValue:o.nameEn,"onUpdate:modelValue":e[1]||(e[1]=a=>o.nameEn=a),placeholder:"请输入英文名称"},null,8,["modelValue"])]),_:1}),l(i,{label:"分类标识",prop:"slug"},{default:t(()=>[l(c,{modelValue:o.slug,"onUpdate:modelValue":e[2]||(e[2]=a=>o.slug=a),placeholder:"例如：alpine-salt"},null,8,["modelValue"])]),_:1}),l(i,{label:"分类描述",prop:"description"},{default:t(()=>[l(c,{modelValue:o.description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.description=a),type:"textarea",rows:4,placeholder:"请输入分类描述"},null,8,["modelValue"])]),_:1}),l(i,{label:"排序",prop:"sortOrder"},{default:t(()=>[l(T,{modelValue:o.sortOrder,"onUpdate:modelValue":e[4]||(e[4]=a=>o.sortOrder=a),min:0},null,8,["modelValue"])]),_:1}),l(i,{label:"状态",prop:"status"},{default:t(()=>[l($,{modelValue:o.status,"onUpdate:modelValue":e[5]||(e[5]=a=>o.status=a)},{default:t(()=>[l(V,{label:1},{default:t(()=>[...e[12]||(e[12]=[d("启用",-1)])]),_:1}),l(V,{label:0},{default:t(()=>[...e[13]||(e[13]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ne=h(Y,[["__scopeId","data-v-3faa5e0d"]]);export{ne as default};
